const order = {
  e: "depthUpdate",
  E: 1584979370785,
  s: "ETHBTC",
  U: 1106611056,
  u: 1106611092,
  b: [
    ["0.02074800", "3.85000000"],
    ["0.02073600", "9.63500000"],
    ["0.02073200", "0.00000000"],
    ["0.02073000", "51.00000000"],
    ["0.02072900", "218.44500000"],
    ["0.02069700", "4.50000000"],
    ["0.02013900", "0.02600000"]
  ],
  a: [
    ["0.02075300", "0.00000000"],
    ["0.02075400", "4.00000000"],
    ["0.02075500", "3.09500000"],
    ["0.02075600", "1.97800000"],
    ["0.02076000", "7.45500000"],
    ["0.02076900", "18.44000000"],
    ["0.02077100", "0.00000000"],
    ["0.02080100", "0.96100000"],
    ["0.02117800", "0.37100000"]
  ]
};

const snapshot = {
  lastUpdateId: 1106490497,
  bids: [
    ["0.02087500", "0.30400000"],
    ["0.02087400", "6.68500000"],
    ["0.02087300", "9.20800000"],
    ["0.02087200", "4.00000000"],
    ["0.02087000", "12.50500000"],
    ["0.02086900", "7.39700000"],
    ["0.02086700", "58.78500000"],
    ["0.02086600", "30.85400000"]
  ],
  asks: [
    ["0.02087900", "0.26200000"],
    ["0.02088000", "1.00000000"],
    ["0.02088100", "2.73100000"],
    ["0.02088200", "0.47900000"],
    ["0.02088300", "0.59800000"],
    ["0.02088500", "1.00000000"],
    ["0.02088600", "0.01500000"],
    ["0.02088700", "0.09200000"],
    ["0.02088900", "1.00000000"],
    ["0.02089100", "9.00000000"],
    ["0.02089200", "0.30000000"],
    ["0.02089300", "10.05700000"],
    ["0.02089400", "35.66100000"]
  ]
};

const convertArrToObjBid = arr => {
  // return arr.map(item => item.filter(i => parseInt(i[1]) !== 0));

  return arr
    .filter(item => parseInt(item[1]) !== 0)
    .sort((a, b) => a[0] > b[0])
    .slice(0, 8)
    .map(i => {
      return {
        p: i[0],
        q: i[1]
      };
    });
};

const convertArrToObjAsk = arr => {
  // return arr.map(item => item.filter(i => parseInt(i[1]) !== 0));
  return arr
    .filter(item => parseInt(item[1]) !== 0)
    .sort((a, b) => a[0] < b[0])
    .slice(0, 8)
    .map(i => {
      return {
        p: i[0],
        q: i[1]
      };
    });
};

/* ONLY SNAPSHOTS
[ { p: '0.02086600', q: '30.85400000' },
  { p: '0.02086700', q: '58.78500000' },
  { p: '0.02086900', q: '7.39700000' },
  { p: '0.02087000', q: '12.50500000' },
  { p: '0.02087200', q: '4.00000000' },
  { p: '0.02087300', q: '9.20800000' },
  { p: '0.02087400', q: '6.68500000' } ]

 */
const mergedArr = [...snapshot.bids, ...order.b];
console.log(convertArrToObjBid(mergedArr));
// console.log(convertArrToObjAsk(snapshot.asks));
